<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendrier</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
    

</head>
<body>
    <header>
        <div class="header-item header-logo">
            <a href="https://mflog.github.io/calao/login.html">
                <img src="img/logo_amgen.png" alt="Logo AMGEN">
            </a>
        </div>
        <div class="header-item header-title">
            <h1>DETAIL</h1>
        </div>
    </header>

    <main class="detail-flex">
<!-- -------------------------------------------------------------------------------------- -->
    
    <div class="detail-main">    
    <div class="detail" id='info'>
        <h2><i class="bi bi-folder2-open detail-blue-icon" ></i> A0-123  <i class="bi bi-arrow-repeat detail-green-icon"> 1</i></h2>
       
        <!--<i class="bi bi-arrow-repeat detail-green-icon"> 1</i> -->
        <!-- <i class="bi bi-arrow-repeat" style="color: red;"></i>  -->	
        
        <div class="table-general">
            <div>
                <p>		
                        <span>
                            <i class="bi bi-hospital detail-blue-icon" ></i> 
                            UNICANCER 
                        </span>
                </p>
                <p>      
                        <span>
                            <i class="bi bi-person-fill detail-blue-icon"></i>
                            Béatrice
                        </span>
                        <span style="margin-left: 10px;">
                            <i class="bi bi-person-fill detail-blue-icon"></i>
                            Christelle  				  
                        </span>
                </p>
            </div>
        </div>
      </div>
      
<!-- -------------------------------------------------------------------------------------- -->
      <div class="detail" id='planning'>
            <h3>Planning</h3>

    
        <div id="chart_div" class="chart"></div>
        <script src="Apexcharts/moment.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
        <script>
            
            var options = {
          series: [
          {
            data: [
              {
                x: "Appel d'offres",
                y: [
                  new Date('2022-09-01').getTime(),
                  new Date('2022-11-04').getTime()
                ],
                fillColor: '#0063C3'
              },
              {
                x: 'Marché',
                y: [
                  new Date('2023-01-01').getTime(),
                  new Date('2024-01-01').getTime()
                ],
                fillColor: '#0063C3'
              },
              {
                x: 'Révision',
                y: [
                  new Date('2023-10-01').getTime(),
                  new Date('2024-01-01').getTime()
                ],
                fillColor: '#0063C3'
              },
              {
                x: 'Reconduction',
                y: [
                  new Date('2024-01-01').getTime(),
                  new Date('2025-01-01').getTime()
                ],
                fillColor: '#0063C3'
              }
            ]
          }
        ],
        annotations: {
                xaxis: [
                    {
                        x: new Date().getTime(),
                        borderColor: '#ff0000',
                        label: {
                            borderColor: '#ff0000',
                            style: {
                                color: '#fff',
                                background: '#ff0000',
                            },
                            text: ""
                        }
                    }
                ]
            },
          chart: {
          height: 350,
          type: 'rangeBar',
          locales: [{
            
    "name": "fr",
    "options": {
      "months": [
        "janvier",
        "février",
        "mars",
        "avril",
        "mai",
        "juin",
        "juillet",
        "août",
        "septembre",
        "octobre",
        "novembre",
        "décembre"
      ],
      "shortMonths": [
        "janv.",
        "févr.",
        "mars",
        "avr.",
        "mai",
        "juin",
        "juill.",
        "août",
        "sept.",
        "oct.",
        "nov.",
        "déc."
      ],
      "days": [
        "dimanche",
        "lundi",
        "mardi",
        "mercredi",
        "jeudi",
        "vendredi",
        "samedi"
      ],
      "shortDays": ["dim.", "lun.", "mar.", "mer.", "jeu.", "ven.", "sam."],
      "toolbar": {
        "exportToSVG": "Télécharger au format SVG",
        "exportToPNG": "Télécharger au format PNG",
        "exportToCSV": "Télécharger au format CSV",
        "menu": "Menu",
        "selection": "Sélection",
        "selectionZoom": "Sélection et zoom",
        "zoomIn": "Zoomer",
        "zoomOut": "Dézoomer",
        "pan": "Navigation",
        "reset": "Réinitialiser le zoom"
      }
    }

    }],
          defaultLocale: 'fr',
        },
        plotOptions: {
          bar: {
            horizontal: true,
            distributed: true,
            dataLabels: {
              hideOverflowingLabels: false
            }
          }
        },
        dataLabels: {
          enabled: true,
          formatter: function(val, opts) {
            var label = opts.w.globals.labels[opts.dataPointIndex]
            var a = moment(val[0])
            var b = moment(val[1])
            var diff = b.diff(a, 'days')
            // return label + ': ' + diff + (diff > 1 ? ' jours' : ' jour')
            return label
          },
          style: {
            colors: ['#0063C3'],
          },
          background: {
            enabled: true,
            foreColor: '#fff',
          }
        },
        tooltip: {
            custom: function({series, seriesIndex, dataPointIndex, w}) {
            var data = w.globals.initialSeries[seriesIndex].data[dataPointIndex];
            var deb = new Date(data.y[0]);
            var fin = new Date(data.y[1]);
            var a = moment(deb)
            var b = moment(fin)
            var diff = b.diff(a, 'days')

      return '<ul>' +
      '<li><b>Début</b>: ' + deb.toLocaleDateString("fr") + '</li>' +
      '<li><b>Fin</b>: ' + fin.toLocaleDateString("fr") + '</li>' +
      '<li><b>Durée</b>: ' + diff + (diff > 1 ? ' jours' : ' jour') + '</li>'
      '</ul>';
    }
  }
        ,
        xaxis: {
          type: 'datetime'
        },
        yaxis: {
          show: false
        },
        grid: {
          row: {
            colors: ['#f3f4f5', '#fff'],
            opacity: 1
          },
        }
        };

    
        var chart = new ApexCharts(document.querySelector("#chart_div"), options);
        chart.render();
      
        </script>
      </div>
      
<!-- -------------------------------------------------------------------------------------- -->
      <div class="detail" id='offres'>
        <h3>Offres</h3>
        <div class="table-container">
            <h4>Sans remises:</h4>
            <table id="table_offres_id" class="display">
                <thead style="background-color:rgb(0,99,195) ;">
                    <tr>
                        <th style="color: white;">Statut</th>
                        <th style="color: white;">N° Lot</th>
                        <th style="color: white;">Produit</th>
                        <th style="color: white;">Dosage(s)</th>
                        <th style="color: white;">Volume</th>
                        <th style="color: white;">Prix</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><i class="bi bi-check-circle-fill detail-green-icon"></i><span style="opacity: 0;">Z1</span></td>
                        <td>629</td>
                        <td>MVASI</td>
                        <td>100mg; 400mg;</td>
                        <td>Volume 629</td>
                        <td>0,6993€</td>
                    </tr>
                    <tr>
                        <td><i class="bi bi-x-circle-fill detail-red-icon"></i><span style="opacity: 0;">Z3</span></td>
                        <td>722</td>
                        <td>KANJINTI</td>
                        <td>150mg;</td>
                        <td>Volume 722</td>
                        <td>Prix 722</td>
                    </tr>
                    <tr>
                        <td><i class="bi bi-x-circle-fill detail-red-icon"></i><span style="opacity: 0;">Z2</span></td>
                        <td>630</td>
                        <td>VECTIBIX</td>
                        <td>100mg;</td>
                        <td>Volume 630</td>
                        <td>Prix 630</td>
                    </tr>
                    <!-- <tr>
                        <td><i class="bi bi-hourglass-split detail-orange-icon"></i><span style="opacity: 0;">Z2</span></td>
                        <td>630</td>
                        <td>Vectibix</td>
                        <td>100mg;</td>
                        <td>Volume 630</td>
                        <td>Prix 630</td>
                    </tr> -->
                    
                </tbody>
            </table>
        </div>
      </div>
      
<!-- -------------------------------------------------------------------------------------- -->
      <div class="detail main-last-child-flex" id='remises'>
        <h3>Remises</h3>
        <div class="div-remises">
            <h4>Remises sur objectifs:</h4>
            <div class="table-container">
                
                <table id="table_remises_id" class="display">
                    <thead style="background-color:rgb(0,99,195) ;">
                        <tr>
                            <th style="color: white;">Début</th>
                            <th style="color: white;">Produit</th>
                            <th style="color: white;">Objectif</th>
                            <th style="color: white;">Remise</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>01/01/2022</td>
                            <td>MVASI</td>
                            <td>Volume semestriel > 7 200 000mg</td>
                            <td>CA 30% </td>
                            
                        </tr>
                        <tr>
                            <td>01/07/2022</td>
                            <td>VECTIBIX</td>
                            <td>Volume annuel > 1 900 000mg</td>
                            <td>CA 2%</td>
                        </tr>
                        <tr>
                            <td>01/07/2022</td>
                            <td>KANJINTI</td>
                            <td>Volume semestriel > 5 500 000mg</td>
                            <td>CA 30%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <hr>
        <div class="div-remises">
            <h4>Remises globales:</h4>
        <!--   
            <div>
                <p>Pour l'ensemble du portefeuille du marché, une remise annuelle sur le CA total de 1,5%, si le CA en fin de chaque période annuelle de marché est supérieur ou égal à 19 000 000€.</p>
            </div>
        -->
            <div class="table-container">
                
                <table id="table_remises_globales_id" class="display">
                    <thead style="background-color:rgb(0,99,195) ;">
                        <tr>
                            <th style="color: white;">Remise</th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>           
                                <p>Pour l'ensemble du portefeuille du marché, une remise annuelle sur le CA total de 1,5%, si le CA en fin de chaque période annuelle de marché est supérieur ou égal à 19 000 000€.</p>
                            </td>                            
                        </tr>
                        <tr>
                            <td>
                                <p>Pour l'ensemble du portefeuille du marché, une remise annuelle sur le CA total de 1,5%, si le CA en fin de chaque période annuelle de marché est supérieur ou égal à 19 000 000€.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
      </div>
    </div>
<!-- -------------------------------------------------------------------------------------- -->  
<div class="detail-notes">
<div class="detail main-last-child" id='notes'>
    <!-- <h3>Notes</h3> -->
    <div class="div-notes">
        <!-- <h4>Ajouter une note <i class="bi bi-plus-circle detail-blue-icon" onclick="alert('nouvelle note')"></i> </h4> -->
        <div class="table-container-noscroll">
            
            <table id="table_notes_id" class="display">
                <thead style="background-color:rgb(0,99,195) ;">
                    <tr>
                        <th style="color: white;">Note</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <strong>Titre</strong>
                            <br> 
                            <p>
                                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ea dignissimos blanditiis, nobis quas fugiat saepe non. Officia tenetur iure illum dignissimos ut! Velit, cum fuga! Sequi ipsa molestiae aspernatur obcaecati!                        
                            </p>
                            
                            <p class="notes-footer">19/10/2022 - Patrice <i class="bi bi-pencil detail-blue-icon" id="note-111" onclick="alert('modifier note-111')"></i></p>
                        </td>    
                    </tr>
                    <tr>
                        <td>
                            <strong>Titre</strong>
                            <br>
                            <p>
                                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Praesentium incidunt quasi ducimus iste, perferendis rerum perspiciatis, libero assumenda qui eveniet dolorem quis, alias quae obcaecati quod. Cupiditate voluptatum sit sapiente!
                            </p>
                            
                            <p class="notes-footer">19/10/2022 - Patrice <i class="bi bi-pencil detail-blue-icon" id="note-222" onclick="alert('modifier note-222')"></i></p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <strong>Titre</strong>
                            <br>
                            <p>
                                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Consequuntur dolorum accusamus repudiandae aspernatur excepturi harum ipsa, ut perferendis. Dicta quia nobis soluta enim asperiores laborum velit vel consequuntur officiis porro.
                            </p>
                            
                            <p class="notes-footer">19/10/2022 - Béatrice <i class="bi bi-pencil detail-blue-icon" id="note-333" onclick="alert('modifier note-333')"></i></p> 
                        </td>                           
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
</div>
</div>


</main>

    <nav class="menu-nav">
        
            <div class="menu-li"><a href="calendar.html"><i class="bi bi-calendar"></i><div class="icon-title">Calendrier</div></a></div>
            <div class="menu-li"><a href="focus.html"><i class="bi bi-search"></i><div class="icon-title">Focus</div></a></div>
            <!-- <div class="menu-li"><a href="#"><i class="bi bi-sliders"></i><br>Filtres</a></div> -->
            <div class="menu-li"><a href="alerts.html"><i class="bi bi-bell"></i><div class="icon-title">Notifications</div></a></div>
            <div class="menu-li"><a href="settings.html"><i class="bi bi-gear-wide-connected"></i><div class="icon-title">Réglages</div></a></div>
        
    </nav>

</body>
<script>
    //iPhone view height correction
    const appHeight = () => {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    window.addEventListener('resize', appHeight)
    appHeight()
</script>

<script>
    $(document).ready( function () {
        $('#table_offres_id').DataTable({
            language: {
                url: "Datatables/fr-FR.json",
                searchPlaceholder: "Rechercher"
            }
        });
    } );

    $(document).ready( function () {
        $('#table_remises_id').DataTable({
            language: {
                url: "Datatables/fr-FR.json",
                searchPlaceholder: "Rechercher"
            } 
        });
    } );

    $(document).ready( function () {
        $('#table_remises_globales_id').DataTable({
            language: {
                url: "Datatables/fr-FR.json",
                searchPlaceholder: "Rechercher"
            } 
        });
    } );

    $(document).ready( function () {
        $('#table_notes_id').DataTable({
            dom: 'l<"note-toolbar">frtip',
       initComplete: function(){
          $("div.note-toolbar").html('<h5>Ajouter une note <i class="bi bi-plus-circle detail-blue-icon" onclick="alert(\'nouvelle note\')"></i></h5>  ');           
       }  ,
            paging: false,
            language: {
                url: "Datatables/fr-FR.json",
                searchPlaceholder: "Rechercher"
            } 
        });

    } );
</script>

</html>